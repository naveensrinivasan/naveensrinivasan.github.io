<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>naveen srinivasan</title><link>/</link><description>Recent content on naveen srinivasan</description><generator>Hugo</generator><language>en</language><lastBuildDate>Thu, 23 May 2024 02:01:16 +0000</lastBuildDate><atom:link href="/index.xml" rel="self" type="application/rss+xml"/><item><title>google peer bonus</title><link>/posts/third-peer-bonus/</link><pubDate>Thu, 23 May 2024 02:01:16 +0000</pubDate><guid>/posts/third-peer-bonus/</guid><description>&lt;p>I am deeply honored to once again receive the Google Peer Bonus award for my contributions to the open-source community in 2024. This recognition feels incredibly rewarding. Thank you, Google!&lt;/p>
&lt;p>I have been fortunate to receive this award in the past, in both 2021 and 2022. The Google Peer Bonus is a small yet significant token of appreciation from Google to open-source contributors. It serves as a “thank you” for the time and effort invested in the open-source community.&lt;/p></description></item><item><title>Enhancing Security with Custom OpenSSF Scorecard Checks</title><link>/posts/custom-openssf-scorecard-check/</link><pubDate>Wed, 24 Jan 2024 12:51:58 -0600</pubDate><guid>/posts/custom-openssf-scorecard-check/</guid><description>&lt;p>The &lt;a href="https://github.com/ossf/scorecard">Open Source Security Foundation (OpenSSF) Scorecard&lt;/a> is essential for performing automated security checks in open-source projects. However, its standard checks might not address all organizations&amp;rsquo; specific security policies and compliance requirements. To overcome this limitation, developers can extend the Scorecard with custom checks by integrating it as a dependency in a Go binary. This method enables organizations to apply their distinctive security standards directly within their development workflows.&lt;/p>
&lt;h2 id="integrating-scorecard-as-a-dependency">Integrating Scorecard as a Dependency&lt;/h2>
&lt;p>Organizations looking to create custom checks can incorporate the Scorecard as a dependency in their Go projects. They achieve this by importing the Scorecard modules into their Go binary, enabling them to utilize Scorecard&amp;rsquo;s libraries and functions to craft and execute custom checks.&lt;/p></description></item><item><title>Hackers and Painters</title><link>/posts/hackers-and-painters/</link><pubDate>Fri, 24 Feb 2023 14:23:23 -0600</pubDate><guid>/posts/hackers-and-painters/</guid><description>&lt;p>&lt;img src="https://i.imgur.com/ejtEz5P.jpg">
Hackers and Painters&amp;quot; &lt;a href="https://www.amazon.com/Hackers-Painters-Big-Ideas-Computer/dp/1449389554">https://www.amazon.com/Hackers-Painters-Big-Ideas-Computer/dp/1449389554&lt;/a> by Paul Graham is a book that celebrates the lives of nerds who challenge the status quo and create new things. Graham points out that school is nothing but a glorified babysitter and that being a nerd is the ultimate rebellion. He discusses the history of wealth creation and the importance of making the right language choices in programming.&lt;/p>
&lt;p>In &amp;ldquo;Beating the Averages,&amp;rdquo; Graham talks about how Lisp was a crucial language choice that allowed his team to create a more robust and flexible web application than its competitors. Throughout the book, Graham emphasizes the importance of creativity and innovation and argues that society should encourage and celebrate those who think outside the box.&lt;/p></description></item><item><title>OSS Trailblazer: My Journey of 4,155 Contributions and Membership in Prominent Open Source Organizations</title><link>/posts/2022-oss-contributions/</link><pubDate>Sat, 24 Dec 2022 16:12:15 -0800</pubDate><guid>/posts/2022-oss-contributions/</guid><description>&lt;p>&lt;em>&lt;strong>2022&lt;/strong>&lt;/em>
&lt;img src="https://i.imgur.com/wCVTIe9.png">&lt;/p>
&lt;p>&lt;em>&lt;strong>2021&lt;/strong>&lt;/em>
&lt;img src="https://i.imgur.com/v9Ihe8x.png">&lt;/p>
&lt;p>&lt;em>TLDR&lt;/em>: I have consistently contributed to open source projects on GitHub for the past two years, making 4,155 contributions in the past year alone. As a result of my dedication, I have become a member of several organizations and received a Google Peer Bonus award. I have also had the opportunity to speak at Linux Foundation conferences about supply chain security. My contributions to the open source community and supply chain security have been rewarding and fulfilling, and I look forward to continuing my work in this field.&lt;/p></description></item><item><title>google peer bonus</title><link>/posts/2022-09-06-google-peer-bonus/</link><pubDate>Fri, 26 Aug 2022 02:01:16 +0000</pubDate><guid>/posts/2022-09-06-google-peer-bonus/</guid><description>&lt;p>I am honored to – once again – be a recipient of this award Google hands out to open source contributors annually. Getting this token of appreciation feels incredible. Thank you, Google! I have been a recipient of this award before, in 2021.&lt;/p>
&lt;p>The award is a small token of appreciation from Google to open-source contributors. It is a way for Google to say “thank you” for the time and effort you have put into the open source community.
&lt;img src="https://i.imgur.com/HknykHT.jpg">&lt;/p></description></item><item><title>Zero Trust Development Environment</title><link>/posts/zero-trust-development-environment/</link><pubDate>Thu, 30 Sep 2021 23:48:46 +0000</pubDate><guid>/posts/zero-trust-development-environment/</guid><description>&lt;p>&lt;img src="https://i.imgur.com/eHwmG9V.jpg">
&lt;em>&lt;a href="https://unsplash.com/photos/JyepCoDqics?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditShareLink">Photo by novia wu on Unsplash&lt;/a>&lt;/em>&lt;/p>
&lt;p>I am paranoid about running unknown code on my machine. I have been using a MacBook for some years now, but the way I used to install any software was &lt;code>brew&lt;/code> like most developers.&lt;/p>
&lt;p>Later I asked the question, &amp;ldquo;How do I trust my &lt;code>brew installs&lt;/code>?&amp;rdquo; But like most of us, I had to try new packages and deploy software to do my work.&lt;/p></description></item><item><title>Stunning Tribble</title><link>/posts/stunning-tribble/</link><pubDate>Mon, 27 Sep 2021 00:37:38 +0000</pubDate><guid>/posts/stunning-tribble/</guid><description>&lt;h2 id="defending-from-including-osvcve-in-go-dependencies">Defending from including OSV/CVE in go dependencies&lt;/h2>
&lt;p>tldr: If you want to avoid including OSV/CVE in your &lt;code>go.mod/go.sum&lt;/code> you can utilize this &lt;a href="https://github.com/naveensrinivasan/stunning-tribble">https://github.com/naveensrinivasan/stunning-tribble&lt;/a> tool do that. Here is an example of how this is being used in scorecard &lt;a href="https://github.com/ossf/scorecard/blob/9df865c4f83cfb36bae487125e5ccbc6aef448c6/Makefile#L64-L72">https://github.com/ossf/scorecard/blob/9df865c4f83cfb36bae487125e5ccbc6aef448c6/Makefile#L64-L72&lt;/a>&lt;/p>
&lt;p>I contribute to a project that is primarily focused on supply chain security &lt;a href="https://github.com/ossf/scorecard">https://github.com/ossf/scorecard&lt;/a> which is part of Open Source Security Foundation, which is also part of Linux Foundation.&lt;/p>
&lt;p>We happened to realize that between version 1.2.0 and 2.0.0 we have included a library that happens to have OSV(&lt;a href="https://osv.dev">https://osv.dev&lt;/a>) &lt;a href="https://deps.dev/go/github.com%2Fossf%2Fscorecard/v1.2.0/comparev2=v2.0.0%2Bincompatible">https://deps.dev/go/github.com%2Fossf%2Fscorecard/v1.2.0/comparev2=v2.0.0%2Bincompatible&lt;/a>. This was accidental, and we wanted to check how to avoid this in the future.&lt;/p></description></item><item><title>Google Peer Bonus Award</title><link>/posts/google-peer-bonus-award/</link><pubDate>Wed, 04 Aug 2021 13:34:31 +0000</pubDate><guid>/posts/google-peer-bonus-award/</guid><description>&lt;p>I’m honored to receive this award Google hands out to open source contributors annually. Getting this token of appreciation feels fantastic, and I’m humbled and grateful I was nominated and selected as a recipient. Thank you, Google!&lt;/p>
&lt;p>&lt;img src="https://i.imgur.com/sKUifM9.png">&lt;/p>
&lt;p>Thank you Google and Abhishek!&lt;/p></description></item><item><title>How to debug the CrashLoopBackOff in Kubernetes when pod is not starting</title><link>/?p=3163/</link><pubDate>Thu, 26 May 2016 02:01:16 +0000</pubDate><guid>/?p=3163/</guid><description>&lt;p>Here is my learning of how I debugged the CrashLoopBackOff in kubernetes when the pod wasn’t starting.&lt;/p>
&lt;p>I wanted to deploy the &lt;!-- raw HTML omitted -->jenkins docker&lt;!-- raw HTML omitted --> image in the cluster. As mentioned in the jenkins docker  repo I wanted to mount an external drive which is an AWS EBS volume.  Here is my deployment yaml.&lt;/p>
&lt;p>[gist id = “98aa6da98ebb9b7e3d7f996c8ef2cb38”]&lt;/p>
&lt;p>After starting the deployment the pod never came up and this the output of  &lt;em>kubectl get pod&lt;/em>&lt;/p></description></item><item><title>Enable Shortcat app in OSX</title><link>/?p=3141/</link><pubDate>Mon, 25 Apr 2016 14:13:47 +0000</pubDate><guid>/?p=3141/</guid><description>&lt;p>&lt;!-- raw HTML omitted -->Shortcat&lt;!-- raw HTML omitted --> app is a software that I use everyday to keep me productive and reduce my dependency on mouse.&lt;/p>
&lt;p>But if you have OSX El Captain you get a message to enable the assistive devices,. But it has been changed from the previous versions of OSX.&lt;/p>
&lt;p>To enable the assistive devices navigate to  &lt;strong>System Preferences &amp;gt; Security &amp;amp; Privacy &amp;gt; Privacy &amp;gt; Accessibility&lt;/strong> and enable for shortcat app.&lt;/p></description></item><item><title>My Docker aliases</title><link>/?p=3061/</link><pubDate>Sat, 23 Apr 2016 14:35:57 +0000</pubDate><guid>/?p=3061/</guid><description>&lt;p>I  have been using docker very often now and because I have been spending most of time in the terminal it made sense to use alias to reduce the typing.&lt;/p>
&lt;p>[gist id = “d6b41d000b93f3ecc3e7a1b900c7382c”]&lt;/p>
&lt;p>I have curated this from others and have also customized to what I want.&lt;/p>
&lt;p> &lt;/p>
&lt;p>All my aliases are stored in my github repo &lt;!-- raw HTML omitted -->&lt;a href="https://github.com/naveensrinivasan/dotvim/blob/master/zshrc">https://github.com/naveensrinivasan/dotvim/blob/master/zshrc&lt;/a>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p> &lt;/p>
&lt;p> &lt;/p></description></item><item><title>How I try avoid using mouse</title><link>/?p=2901/</link><pubDate>Mon, 28 Mar 2016 00:57:41 +0000</pubDate><guid>/?p=2901/</guid><description>&lt;p>Like most of the Dev’s I love using my Keyboard more than mouse. I am big vim fan and have been using vim for over 7-8 years. I still consider myself novice.&lt;/p>
&lt;p>Here are the ways I manage to use keyboard over mouse&lt;/p>
&lt;ul>
&lt;li>&lt;!-- raw HTML omitted -->Shortcat&lt;!-- raw HTML omitted --> – Great app get rids of use mouse in OSX – This is a Paid App , which IMHO is the best investment for me. There is also a trial version.&lt;/li>
&lt;li>MacVim – I have been using MacVim as my primary text editor.&lt;/li>
&lt;li>&lt;!-- raw HTML omitted -->cVim&lt;!-- raw HTML omitted --> – Vim features within chrome. The best part is it allows custom vimrc.&lt;/li>
&lt;li>IntelliJ Vim Plugin – &lt;!-- raw HTML omitted -->&lt;a href="https://github.com/JetBrains/ideavim">https://github.com/JetBrains/ideavim&lt;/a>&lt;!-- raw HTML omitted --> also allow vimrc&lt;/li>
&lt;li>Here is a plugin &lt;!-- raw HTML omitted -->&lt;a href="https://github.com/athiele/key-promoter-fork">https://github.com/athiele/key-promoter-fork&lt;/a>&lt;!-- raw HTML omitted --> for IntelliJ – show hints when using the mouse for something which could be done with the keyboard.&lt;/li>
&lt;li>&lt;!-- raw HTML omitted -->Spectacle&lt;!-- raw HTML omitted --> – For window management in OSX with keyboard.&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;p> &lt;/p></description></item><item><title>Taking it up a notch with my standing desk with fluidstance</title><link>/?p=2781/</link><pubDate>Fri, 11 Mar 2016 01:09:50 +0000</pubDate><guid>/?p=2781/</guid><description>&lt;p>I have been standing at work for the past 2  years. And I have seen significant improvement with respect to my productivity and non-drowsiness with standing desk. The one draw back with that I have seen was standing in a position where I put a lot of stress on one of the legs. And I wanted ti try something different.&lt;/p>
&lt;p>That’s when I saw &lt;!-- raw HTML omitted -->fluidstance&lt;!-- raw HTML omitted -->. Bought myself one which brings in a new challenge. I have been using it for a week and it is great  has made me sore in the places which I didn’t when I was standing without it.&lt;/p></description></item><item><title>Solution to Adventcode Day 7 in FSharp</title><link>/?p=2641/</link><pubDate>Tue, 12 Jan 2016 22:33:14 +0000</pubDate><guid>/?p=2641/</guid><description>&lt;p>Here is my solution to &lt;!-- raw HTML omitted -->adventcode problem 7 &lt;!-- raw HTML omitted --> using F#.&lt;/p>
&lt;p>I am using the adventofcode to improve my functional programming skills. The gist of the problem is to solve the logic gates which is represented as 16 bit integer’s  and these depend on other gates.&lt;/p>
&lt;p>The puzzle starts of with simple problem&lt;/p>
&lt;ul>
&lt;li>&lt;code>123 -&amp;gt; x&lt;/code>&lt;/li>
&lt;li>&lt;code>456 -&amp;gt; y&lt;/code>&lt;/li>
&lt;li>``Here is my solution to &lt;!-- raw HTML omitted -->adventcode problem 7 &lt;!-- raw HTML omitted --> using F#.&lt;/li>
&lt;/ul>
&lt;p>I am using the adventofcode to improve my functional programming skills. The gist of the problem is to solve the logic gates which is represented as 16 bit integer’s  and these depend on other gates.&lt;/p></description></item><item><title>Parsing GitHub API</title><link>/?p=2571/</link><pubDate>Wed, 09 Dec 2015 16:46:57 +0000</pubDate><guid>/?p=2571/</guid><description>&lt;p>I have been contributing to &lt;!-- raw HTML omitted -->&lt;a href="https://github.com/octokit/octokit.net">https://github.com/octokit/octokit.net&lt;/a>&lt;!-- raw HTML omitted --> project. It is the API for accessing GitHub. One of the recent questions that came up was to get the list of &lt;!-- raw HTML omitted -->&lt;a href="https://github.com/octokit/octokit.net/issues/968">https://github.com/octokit/octokit.net/issues/968&lt;/a>&lt;!-- raw HTML omitted -->.&lt;/p>
&lt;p>The API’s are published in HTML &lt;!-- raw HTML omitted -->&lt;a href="https://developer.github.com/v3/">https://developer.github.com/v3/&lt;/a>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>There are about 63 + categories that have API. Wanted to parse all of these with least manual intervention.&lt;/p></description></item><item><title>fsharp docker image</title><link>/?p=2481/</link><pubDate>Wed, 11 Nov 2015 02:41:14 +0000</pubDate><guid>/?p=2481/</guid><description>&lt;p>The fsharp project has a official docker image &lt;!-- raw HTML omitted -->&lt;a href="https://github.com/fsprojects/docker-fsharp">https://github.com/fsprojects/docker-fsharp&lt;/a>&lt;!-- raw HTML omitted --> . The one issue with that is it is based on mono 4.0.4 which is buggy and fsharp does not work very well. The latest alpha release of the mono with which fsharp works well is 4.2.0. The 4.2.0 isn’t available in stable channels.&lt;/p>
&lt;p>So I created a docker image with the latest mono from their alpha repo and using the latest fsharp from the github.&lt;/p></description></item><item><title>View the http redirect and response message from an external authentication provider using ETW</title><link>/?p=1510/</link><pubDate>Mon, 29 Jun 2015 02:57:26 +0000</pubDate><guid>/?p=1510/</guid><description>&lt;p>Recently I had to troubleshoot messages that were being sent from an web application hosted on IIS to an external authentication provider. The logs from the application wasn’t something closer to the metal and wasn’t really providing all the details. I really wanted something like fiddler for the webserver. I could have a ran network traces to troubleshoot the issue but the problem was it wasn’t happening consistently. It was sporadic. I knew there would be ETW traces that would have this information. The IIS web logs don’t capture this information.&lt;/p></description></item><item><title>Getting my Yoga stats from Yogaglo</title><link>/?p=1499/</link><pubDate>Wed, 17 Jun 2015 19:16:33 +0000</pubDate><guid>/?p=1499/</guid><description>&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>Use Eventsource to get the duration of a Start Stop of Custom ETW events</title><link>/?p=1493/</link><pubDate>Mon, 08 Jun 2015 19:53:29 +0000</pubDate><guid>/?p=1493/</guid><description>&lt;p>The &lt;!-- raw HTML omitted -->EventSource&lt;!-- raw HTML omitted --> library provides an option to get duration of Custom ETW start and stop events and when used with Perfview we could leverage this to stop tracing when the duration is more than what we expect.&lt;/p>
&lt;p>What it is for example ,there could an external API call the application makes that has to be traced with the start and when it finishes then the stop of the event is called. Ideally we would have a ability to view the duration of these events similar to ASP.NET calls.  The EventSource Library along with Perfview provides this ability to view the duration between the start and stop events.&lt;/p></description></item><item><title>Log dynamic Custom objects in ETW using EventSource</title><link>/?p=1489/</link><pubDate>Fri, 29 May 2015 03:35:50 +0000</pubDate><guid>/?p=1489/</guid><description>&lt;p>With the latest release of &lt;!-- raw HTML omitted -->EventSource&lt;!-- raw HTML omitted --> we could create dynamic events without having to create class that inherits from EventSource. This is will be not be good for Performance.&lt;/p>
&lt;p>Using these methods we could either log Anonymous objects or Classes that have the EventData Attribute applied to it. The caveat is that these objects public properties alone will be serialized. These properties have to be of native types like string,int,datetime, guid , IEnumerable. If you don’t want a property to be serialized you could apply the attribute EventIgnore.&lt;/p></description></item><item><title>The case of slow Visual Studio startup</title><link>/?p=1469/</link><pubDate>Wed, 20 May 2015 01:23:35 +0000</pubDate><guid>/?p=1469/</guid><description>&lt;p>In this post I would use Perfview /ETW to diagnose the delayed start-up of visual studio.&lt;/p>
&lt;p>To analyze the problem start-up VS within Perfview as a run command&lt;/p>
&lt;p>[gist https://gist.github.com/naveensrinivasan/5eb6406d6d38f2143acb]&lt;/p>
&lt;p>This would launch visual studio and collect etw traces. I have also enabled CodeMarkers , which is ETW traces for Visual Studio in case if you want to trace any extensions performance.&lt;/p>
&lt;p>&lt;a href="https://naveensrinivasan.files.wordpress.com/2015/05/perfview-main.jpg">&lt;!-- raw HTML omitted -->&lt;/a>After it completes I choose the CPU Stacks and filtered with devenv.exe process.&lt;/p></description></item><item><title>Managed Stack Explorer using ClrMD</title><link>/?p=1457/</link><pubDate>Thu, 14 May 2015 23:14:45 +0000</pubDate><guid>/?p=1457/</guid><description>&lt;p>How often we run into an issue in the field where we just want to see the managed call-stack where the exception is or where the thread is hung. One of the options is debugger or something like ETW.&lt;/p>
&lt;p>So I built a managed stack explorer&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;a href="http://naveensrinivasan.github.io/ManagedStackExplorer/">http://naveensrinivasan.github.io/ManagedStackExplorer/&lt;/a>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;a href="https://raw.githubusercontent.com/naveensrinivasan/ManagedStackExplorer/master/screenshot.jpg">&lt;!-- raw HTML omitted -->&lt;/a>&lt;/p>
&lt;p>Managed Stack Explorer provides call stack for .NET applications using managed code with thread local variables. The API as of now does not provide values for the local variables. When it is available we can update it.&lt;/p></description></item><item><title>Measure GC Allocations and Collections using TraceEvent</title><link>/?p=1437/</link><pubDate>Tue, 12 May 2015 01:14:34 +0000</pubDate><guid>/?p=1437/</guid><description>&lt;p>In this post I will explore  how we could use &lt;!-- raw HTML omitted -->TraceEvent&lt;!-- raw HTML omitted --> to measure our code (even at function level) for GC Allocations and Collections.&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Save this with “.linq” extension and then open in  linqpad.&lt;/p>
&lt;p>[gist https://gist.github.com/naveensrinivasan/b72fd80876eb67557ae8]&lt;/p>
&lt;p>Here is the TL;DR&lt;/p>
&lt;p>Why would I want to know GC events on a function level? Doesn’t the PerfMon counter  provide that information on an application level? Isn’t Premature optimization root of all evil?&lt;/p></description></item><item><title>Look ma I figured out why my ETW EventSource isn’t tracing</title><link>/?p=1414/</link><pubDate>Tue, 05 May 2015 13:47:39 +0000</pubDate><guid>/?p=1414/</guid><description>&lt;p>The &lt;!-- raw HTML omitted -->EventSource &lt;!-- raw HTML omitted -->class in the framework 4.5 helps in writing custom ETW tracing.&lt;/p>
&lt;p>When using EventSource class built within the framework, if the order of the methods don’t match ordinal number position in the class it would fail generating ETW traces. The EventSource has dependency on the order of the methods in the class.&lt;/p>
&lt;p>This code would produce a valid ETW traces&lt;/p></description></item><item><title>Making an Image Easier to Debug</title><link>/?p=1368/</link><pubDate>Mon, 20 Jun 2011 17:45:24 +0000</pubDate><guid>/?p=1368/</guid><description>&lt;p>I am doing security review for a managed application which is obfuscated. So I am doing a lot of   disassembling code at runtime using Windbg. One of the issues is that code gets JIT optimized because of the retail build. This makes it harder for me debug when mapping it back. Realized  that I could turnoff  JIT Optimization’s using the ini file.&lt;/p>
&lt;p>[sourcecode]&lt;/p>
&lt;p>[.NET Framework Debugging Control]&lt;/p>
&lt;p>GenerateTrackingInfo=1&lt;/p>
&lt;p>AllowOptimize=0&lt;/p>
&lt;p>[/sourcecode]&lt;/p></description></item><item><title>Updating .NET String in memory with Windbg</title><link>/?p=1353/</link><pubDate>Tue, 14 Jun 2011 16:42:24 +0000</pubDate><guid>/?p=1353/</guid><description>&lt;p>In this post I would show a simple trick to update .NET strings in memory with Windbg. The caveat is make sure the string that you’re updating is long enough to fit into the string buffer. If not there would be a memory corruption.&lt;/p>
&lt;p>Here is a simple windows form application with title “Good”&lt;/p>
&lt;p>&lt;a href="http://104.197.135.42/wp-content/uploads/2011/06/updatestring13.jpg">&lt;!-- raw HTML omitted -->&lt;/a>&lt;/p>
&lt;p>The goal is to update the title from “Good” to “Bad”.&lt;/p></description></item><item><title>Who is is blocking my UI Thread? Diagnosing the cause using Windbg</title><link>/?p=1344/</link><pubDate>Fri, 01 Apr 2011 18:59:06 +0000</pubDate><guid>/?p=1344/</guid><description>&lt;p>It so happens most of the applications block the UI thread and do sync I/O, which is most common reason for “Not Responding” window. Here is a post &lt;a href="http://blogs.msdn.com/b/nathannesbit/archive/2010/12/28/detecting-ui-thread-misuse.aspx">http://blogs.msdn.com/b/nathannesbit/archive/2010/12/28/detecting-ui-thread-misuse.aspx&lt;/a> that tries helping in detecting this. I like to handle this from bottom of the stack because we have a cool tool called debugger.&lt;/p>
&lt;p>The approach is simple as having a break-point on a function like “KERNEL32!WaitFor*” and checking if the current thread is a UI thread. This could also be done for other functions like Sleep on UI thread by having a break-point on “KERNELBASE!SleepEx”.&lt;/p></description></item><item><title>Correlating between .NET and native thread in Windbg</title><link>/?p=1324/</link><pubDate>Sun, 09 Jan 2011 01:46:06 +0000</pubDate><guid>/?p=1324/</guid><description>&lt;p>I recently saw a stackoverflow question where  someone wanted to know how they could correlate between  managed and native threads within Windbg.&lt;/p>
&lt;p>Here is the managed thread object within the debugger&lt;/p>
&lt;blockquote>
&lt;p>0:004&amp;gt; !do 02a1d6c4&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Name:        System.Threading.Thread&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>MethodTable: 672e001c&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>EEClass:     67018ed8&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Size:        48(0x30) bytes&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>File:        C:WindowsMicrosoft.NetassemblyGAC_32mscorlibv4.0_4.0.0.0__b77a5c561934e089mscorlib.dll&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Fields:&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>MT    Field   Offset                 Type VT     Attr    Value Name&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672c8a78  4000720        4 ….Contexts.Context  0 instance 00000000 m_Context&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672db4b8  4000721        8 ….ExecutionContext  0 instance 00000000 m_ExecutionContext&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672df9fc  4000722        c        System.String  0 instance 02a1a220 m_Name&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672dfed0  4000723       10      System.Delegate  0 instance 00000000 m_Delegate&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672e63f4  4000724       14 …ation.CultureInfo  0 instance 00000000 m_CurrentCulture&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672e63f4  4000725       18 …ation.CultureInfo  0 instance 00000000 m_CurrentUICulture&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672df638  4000726       1c        System.Object  0 instance 00000000 m_ThreadStartArg&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->672daa7c  4000727       20        System.IntPtr  1 instance   542560 DONT_USE_InternalThread&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672e29c8  4000728       24         System.Int32  1 instance        2 m_Priority&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672e29c8  4000729       28         System.Int32  1 instance        3 m_ManagedThreadId&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672cb76c  400072a      18c …LocalDataStoreMgr  0   shared   static s_LocalDataStoreMgr&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>Domain:Value  0049f148:NotInit  &amp;laquo;&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;blockquote>
&lt;p>672ce328  400072b        c …alDataStoreHolder  0   shared TLstatic s_LocalDataStore&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;blockquote>
&lt;p>Thread:Value &amp;laquo;&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>The present thread’s @$teb (Thread Environment Block) is &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->7efac000&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>0:004&amp;gt; ? @$teb Evaluate expression: 2130374656 = 7efac000&lt;/p>
&lt;p>The DONT_USE_InternalThread is pointer to the native thread. Dumping the raw memory of the pointer should give us more information we are looking for.&lt;/p>
&lt;blockquote>
&lt;p>0:004&amp;gt; dd poi(02a1d6c4+20)&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>00542560  67e9ee88 0000b220 00000000 056ef42c&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>00542570  00000000 00000000 00000000 00000003&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>00542580  00000000 00542588 00542588 00542588&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>00542590  00000000 00000000 baad0000 004a4f30&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>005425a0  &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->7efac000&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> baadf00d 00000000 00000000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>005425b0  00024dac 00000000 00000000 00000000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>005425c0  00000000 baadf00d 00541ba0 00544290&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>005425d0  00544298 00000200 00544290 00544580&lt;/p>
&lt;/blockquote>
&lt;p>The pointer to teb is in the 40th offset of the  DONT_USE_InternalThread and here is the script that would get teb for each managed thread.&lt;/p>
&lt;p>[sourcecode]&lt;/p>
&lt;p>.foreach ($thread {!dumpheap -mt 672e001c -short}) { .if ( poi(${$thread}+20) != 0) {.printf &amp;ldquo;%p n&amp;rdquo;,dwo(poi(${$thread}+20)+40)}}&lt;/p>
&lt;p>[/sourcecode]&lt;/p>
&lt;blockquote>
&lt;p>0:004&amp;gt; .foreach ($thread {!dumpheap -mt 672e001c -short}) { .if ( poi(${$thread}+20) != 0) {.printf “%p n”,dwo(poi(${$thread}+20)+40) }}&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7efdd000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7efac000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef9a000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef97000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef2f000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef26000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7efd7000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef20000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef1d000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef1d000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef0e000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7efa3000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>7ef2c000&lt;/p>
&lt;/blockquote>
&lt;p>So with the above we could dump the teb structure using dt ntdll!_TEB command. In the next post I will demonstrate how this can be used to debug some cool stuff 🙂&lt;/p></description></item><item><title>Conditional BreakPoint based on callstack within Windbg – .NET</title><link>/?p=1314/</link><pubDate>Wed, 29 Dec 2010 02:00:12 +0000</pubDate><guid>/?p=1314/</guid><description>&lt;p>Someone recently asked me “How to have a break-point on a method based on certain function in the call-stack?”&lt;/p>
&lt;p>Here is the sample code to demonstrate this&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>using System;&lt;/p>
&lt;p>using System.Threading.Tasks;&lt;/p>
&lt;p>using System.Data.SqlClient;&lt;/p>
&lt;p>namespace Test&lt;/p>
&lt;p>{&lt;/p>
&lt;p>class Program&lt;/p>
&lt;p>{&lt;/p>
&lt;p>string connectionString = @&amp;ldquo;Data Source=.sqlexpress;Initial Catalog=Tfs_Configuration;Integrated Security=True&amp;rdquo;;&lt;/p>
&lt;p>public void Bar()&lt;/p>
&lt;p>{&lt;/p>
&lt;p>using (var c = new SqlConnection(connectionString))&lt;/p>
&lt;p>{&lt;/p>
&lt;p>c.Open();&lt;/p>
&lt;p>var command = new SqlCommand(@&amp;ldquo;update [tbl_AccessMapping] set [DisplayName] = @param&amp;rdquo;, c);&lt;/p>
&lt;p>command.Parameters.Add(new SqlParameter(&amp;ldquo;param&amp;rdquo;, &amp;ldquo;Bar&amp;rdquo;));&lt;/p></description></item><item><title>Saving Dynamic Assembly in .NET 4.0 using Windbg</title><link>/?p=1298/</link><pubDate>Thu, 23 Dec 2010 23:37:45 +0000</pubDate><guid>/?p=1298/</guid><description>&lt;p>I recently had to debug a .NET 4.0 process which was loading the dependent assemblies using the &lt;!-- raw HTML omitted -->AppDomain.AssemblyResolve&lt;!-- raw HTML omitted --> event. The dependent assemblies were stored within the executable. I couldn’t disassemble the code to look for the dependent assembly because the exe was obfuscated. FYI the dynamic assembly cannot be saved using !SaveModule and here is the reason for &lt;a href="http://stackoverflow.com/questions/1872502/how-to-save-a-dynamically-generated-assembly-that-is-stored-in-memory/1872588#1872588">I recently had to debug a .NET 4.0 process which was loading the dependent assemblies using the &lt;!-- raw HTML omitted -->AppDomain.AssemblyResolve&lt;!-- raw HTML omitted --> event. The dependent assemblies were stored within the executable. I couldn’t disassemble the code to look for the dependent assembly because the exe was obfuscated. FYI the dynamic assembly cannot be saved using !SaveModule and here is the reason for&lt;/a> read the comments especially from Evian. Unlike psscor2.dll the sos for .NET 4.0 does not have a !dumpdynamicassembly with a save option.&lt;/p></description></item><item><title>Dumping Generic List in .NET within Windbg</title><link>/?p=1281/</link><pubDate>Fri, 10 Dec 2010 03:15:43 +0000</pubDate><guid>/?p=1281/</guid><description>&lt;p>Most of the code uses List&lt;!-- raw HTML omitted --> for storing items.  The present solutions don’ t have a way to dump List&lt;!-- raw HTML omitted --> within windbg. Even though sosex has an option to dump the List&lt;!-- raw HTML omitted --> using !mdt it still doesn’t meet the scripting requirements. For example here is an output using sosex “!mdt -e 029a91c0”&lt;/p>
&lt;blockquote>
&lt;p>0:000&amp;gt; !mdt -e 029a91c0&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>029a91c0 (System.Collections.Generic.List`1[[Test.Foo, Test]])&lt;/p></description></item><item><title>Why isn’t the !bpmd in sos / windbg not working?</title><link>/?p=1271/</link><pubDate>Mon, 06 Dec 2010 00:16:53 +0000</pubDate><guid>/?p=1271/</guid><description>&lt;p>I recently noticed another blog &lt;!-- raw HTML omitted -->post &lt;!-- raw HTML omitted -->refer to one of my &lt;!-- raw HTML omitted -->post&lt;!-- raw HTML omitted -->. The issue was, sos wasn’t enabling the break-points on non-jitted functions. The classic example being “Main”.  Thanks to &lt;!-- raw HTML omitted -->Steve &lt;!-- raw HTML omitted --> I have been using sosex and not sos for setting break-points.&lt;/p>
&lt;p>From my previous &lt;!-- raw HTML omitted -->post &lt;!-- raw HTML omitted --> you can understand how CLR is using clrn/CLRNotificationException to notify sos/sosex on JIT. With this information when I looked at the rotor &lt;!-- raw HTML omitted -->code&lt;!-- raw HTML omitted -->, I noticed an interesting member variable “g_dacNotificationFlags”. So I decided to check the value of this variable when using !bpmd from sos and !mbm from sosex.&lt;/p></description></item><item><title>Using sosex within windbg to understand IL and Assembly code</title><link>/?p=1261/</link><pubDate>Tue, 30 Nov 2010 01:33:25 +0000</pubDate><guid>/?p=1261/</guid><description>&lt;p>Sometimes when debugging managed code within the debugger I would like to see the C# code ,the IL translation for the managed code and the Assembly code for the IL. For example I recently learned that callvirt MSIL instruction must do the null-check before invoking method.&lt;/p>
&lt;blockquote>
&lt;p>C:UsersnaveenDocumentsVisual Studio 2010ProjectsConsoleApplication13Program.cs @ 18:&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>00bc26d8 8b4dec          mov     ecx,dword ptr [ebp-14h]&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>00bc26db 3909            cmp     dword ptr [ecx],ecx //NULL Check&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>00bc26dd ff1508a82900    call    dword ptr ds:[29A808h] (System.String.ToLower(), mdToken: 0600031d)&lt;/p></description></item><item><title>Windbg trick – Having custom name for user-defined pseudo-registers</title><link>/?p=1246/</link><pubDate>Tue, 23 Nov 2010 01:07:53 +0000</pubDate><guid>/?p=1246/</guid><description>&lt;p>There are 20 &lt;a href="http://msdn.microsoft.com/en-us/library/ff553485(VS.85).aspx">user-defined pseudo-registers&lt;/a> (&lt;strong>$t0&lt;/strong>, &lt;strong>$t1&lt;/strong>, …, &lt;strong>$t19&lt;/strong>) in windbg/cdb . To have scripts with variable names as @$t0 and @$t1 isn’t helpful for readability. The trick to avoid this is by using the “aS” command.&lt;/p>
&lt;p>Here is an example, for a loop variable I would like to use a variable name like “i” instead of “@$t0” and to use “i”  as a variable  here is the command&lt;/p>
&lt;blockquote>
&lt;p>aS i “@$t0”&lt;/p></description></item><item><title>Decoding clr20r3 .NET exception – using mono cecil</title><link>/?p=1208/</link><pubDate>Wed, 17 Nov 2010 02:01:13 +0000</pubDate><guid>/?p=1208/</guid><description>&lt;p>I have often seen Devs trying to figure out the cause of the app crash without a memory dump. The only information that is available to analyze is the Windows Error Reporting message in the event viewer which would have “Event Name: CLR20r3” along with &lt;a href="http://naveensrinivasan.com/2010/04/24/exploring-unhandledexception-in-net-and-watson-buckets/">Watson bucket&lt;/a> information like this.&lt;/p>
&lt;blockquote>
&lt;p>Fault bucket , type 0&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Event Name: CLR20r3&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Response: Not available&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Cab Id: 0&lt;/p>
&lt;p>Problem signature:&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>P1: unhandledexception.exe&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>P2: 1.0.0.0&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>P3: 4ce1e0f1&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>P4: LibraryCode&lt;/p></description></item><item><title>Script to !SaveAllModules in .NET 4.0 SOS within Windbg</title><link>/?p=1202/</link><pubDate>Fri, 12 Nov 2010 19:29:06 +0000</pubDate><guid>/?p=1202/</guid><description>&lt;p>The .NET 4.0 sos doesn’t have save all modules (!SaveAllModules) command. It only has !SaveModule. Recently I was debugging a .NET 4.0 process for which I had to save all the modules. Here is a script that does !SaveAllModules.&lt;/p>
&lt;p>[sourcecode]&lt;/p>
&lt;p>!for_each_module .if ($spat (&amp;quot;${@#ImageName}&amp;quot;,&amp;quot;*.exe&amp;quot;)) { !SaveModule ${@#Base} c:temp${@#ModuleName}.exe } .else { !SaveModule ${@#Base} c:temp${@#ModuleName}.dll }&lt;/p>
&lt;p>[/sourcecode]&lt;/p></description></item><item><title>Using Managed Code to debug Memory Dumps</title><link>/?p=1168/</link><pubDate>Thu, 11 Nov 2010 22:21:02 +0000</pubDate><guid>/?p=1168/</guid><description>&lt;p>I happened to notice the new &lt;a href="http://translate.google.com/translate?hl=en&amp;sl=pt&amp;u=http://blogs.technet.com/b/carnevale/archive/2010/10/04/debugdiag-1-2-beta1.aspx&amp;ei=dwbcTOe4DIGglAfc6uWuCQ&amp;sa=X&amp;oi=translate&amp;ct=result&amp;resnum=5&amp;ved=0CDkQ7gEwBA&amp;prev=/search%3Fq%3Ddebugdiag%2B1.2%26hl%3Den%26client%3Dfirefox-a%26hs%3DNUZ%26rls%3Dorg.mozilla:en-US:official%26prmd%3Div">I happened to notice the new&lt;/a> and it had COM based API for dbgeng. The sample code were in VB Script. I much comfortable writing managed code compared to VB script. So I  decided to use COM based API in managed code.&lt;/p>
&lt;p>Here are couple of ways to solve certain problems using this&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Parallel GC Roots&lt;/strong> :- Getting GC Roots from memory dump is the most time consuming because SOS is single threaded. I use PFX to do them in parallel.&lt;/li>
&lt;li>&lt;strong>Reconstructing manged objects&lt;/strong> :- Creating an instance of an object by reading data from the memory dump.&lt;/li>
&lt;/ol>
&lt;p>Need to add reference to the COM Library&lt;/p></description></item><item><title>Downloading PDC10 videos using the new async feature</title><link>/?p=1156/</link><pubDate>Wed, 03 Nov 2010 01:56:34 +0000</pubDate><guid>/?p=1156/</guid><description>&lt;p>I knew PDC10 has an OData endpoint which is &lt;a href="http://odata.microsoftpdc.com/ODataSchedule.svc/">http://odata.microsoftpdc.com/ODataSchedule.svc/&lt;/a> . The best part about  OData is querying for specific data that we are looking for. And here is my OData url for filtering twitter hashtag #languages&lt;/p>
&lt;p>[sourcecode]&lt;/p>
&lt;p>&lt;a href="http://odata.microsoftpdc.com/ODataSchedule.svc/Sessions()?$filter=startswith(TwitterHashtag,&amp;#8217;%23languages&amp;%238217;)&amp;$expand=DownloadableContent&amp;$select=DownloadableContent">http://odata.microsoftpdc.com/ODataSchedule.svc/Sessions()?$filter=startswith(TwitterHashtag,&amp;#8217;%23languages&amp;#8217;)&amp;$expand=DownloadableContent&amp;$select=DownloadableContent&lt;/a>&lt;/p>
&lt;p>[/sourcecode]&lt;/p>
&lt;p>With the above OData feed I could get urls for low bandwidth mp4’s that I can download. And here is the sample code for filtering&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>var x =XDocument.Load(@&amp;ldquo;c:tempsession.xml&amp;rdquo;).Descendants().AsParallel().Where(xd =&amp;gt; xd.Name.LocalName==&amp;ldquo;Url&amp;rdquo;&lt;/p></description></item><item><title>Dumping .NET strings to files using Windbg</title><link>/?p=1128/</link><pubDate>Mon, 01 Nov 2010 21:37:16 +0000</pubDate><guid>/?p=1128/</guid><description>&lt;p>In this post I would demonstrate how to dump strings from a memory dump /live process to a file. Recently I had to debug a process which had few big strings where I had to analyze its contents. The !dumpobj from sos would only dump partial strings.  I had to dump few hundred XML strings that I had to analyze using some automation. And hence comes the script.&lt;/p>
&lt;p>[sourcecode]&lt;/p>
&lt;p>$$ Dumps the managed strings to a file&lt;/p></description></item><item><title>Dumping ASP.NET Session (x86 /x64) within Windbg</title><link>/?p=1071/</link><pubDate>Wed, 27 Oct 2010 01:18:21 +0000</pubDate><guid>/?p=1071/</guid><description>&lt;p>This post is going to be about dumping ASP.NET session objects using Windbg. I had recently answered a stackoverflow question in which someone wanted to dump ASP.NET session objects for 64-bit IIS (x64). I thought why not blog about the same which might be useful to others.  The challenge is to write one script that should work in both x86/x64.  FYI there is a script from &lt;a href="http://blogs.msdn.com/b/tess/archive/2007/09/18/debugging-script-dumping-out-asp-net-session-contents.aspx">Tess&lt;/a> that does dump out the session contents, AFAIK it will not work on x64 and my script iterates through the array using the array length instead of using “.foreach /pS 2 /ps 99” which is somewhat cleaner.&lt;/p></description></item><item><title>GC Start and Stop events in .NET using Windbg</title><link>/?p=1064/</link><pubDate>Wed, 08 Sep 2010 01:55:27 +0000</pubDate><guid>/?p=1064/</guid><description>&lt;p>I was recently showing someone the new ETW features in .NET especially the &lt;a href="http://msdn.microsoft.com/en-us/library/ff356162.aspx">GC Event notification&lt;/a> and I was asked if we can get this using Windbg.&lt;/p>
&lt;p>So here is the sample code for the GC Collection&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>namespace GCStartStop&lt;/p>
&lt;p>{&lt;/p>
&lt;p>public partial class Form1 : Form&lt;/p>
&lt;p>{&lt;/p>
&lt;p>public Form1()&lt;/p>
&lt;p>{&lt;/p>
&lt;p>InitializeComponent();&lt;/p>
&lt;p>button1.Click += (s, b) =&amp;gt; GC.Collect(2);&lt;/p>
&lt;p>button1.Click += (s, b) =&amp;gt; GC.Collect(1);&lt;/p>
&lt;p>}&lt;/p>
&lt;p>}&lt;/p>
&lt;p>}&lt;/p>
&lt;p>[/sourcecode]&lt;/p>
&lt;p>The goal is set to a break-point only when the collection count is 2. Here is a bp script for doing this.&lt;/p></description></item><item><title>Get GC Information in Silverlight</title><link>/?p=1050/</link><pubDate>Wed, 11 Aug 2010 02:32:52 +0000</pubDate><guid>/?p=1050/</guid><description>&lt;p>I had earlier written a &lt;a href="http://naveensrinivasan.com/2010/03/21/get-gc-information-in-silverlight-using-etw/">post&lt;/a> on getting GC information on Silverlight using ETW. With that we would have to write code to parse the ETW csv file.  In this post I am going to be using &lt;a href="http://bcl.codeplex.com/wikipage?title=PerfMonitor&amp;referringTitle=Home">Perfmonitor&lt;/a> to do this. This tools uses the same ETW under covers, but it does all the plumbing and gives a nice report , which is much easier to read.  Here are the reports&lt;/p>
&lt;p>&lt;a href="http://104.197.135.42/wp-content/uploads/2010/08/gc1.jpg">&lt;!-- raw HTML omitted -->&lt;/a>&lt;/p></description></item><item><title>Script to load sos within Windbg based on .NET Framework version</title><link>/?p=1032/</link><pubDate>Mon, 26 Jul 2010 04:33:21 +0000</pubDate><guid>/?p=1032/</guid><description>&lt;p>I often debug  .NET Framework v 2.0 / v 4.0 code within windbg. In v 2.0 the main clr dll was called “mscorwks.dll” and in v 4.0 it is called “clr.dll”.  As many of you are aware , to load sos in v 2.0 we would have to enter “.loadby sos mscorwks” and in v 4.0 it would be “.loadby sos clr” . This was a pain for me. Came up with a script to automate loading sos based on clr version&lt;/p></description></item><item><title>Debugging .NET – mystery between DEBUG versus RELEASE within windbg</title><link>/?p=1015/</link><pubDate>Thu, 22 Jul 2010 02:48:17 +0000</pubDate><guid>/?p=1015/</guid><description>&lt;p>I am sure most of us have debugged applications that are build with debug turned on, which is obviously much easier compared to debugging release build (optimized code). In this post I am going to share one of my experiences of debugging release build code. I will demonstrate this with a simple Console Application.&lt;/p>
&lt;p>Here is the code&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>using System;&lt;/p>
&lt;p>namespace ConsoleApplication&lt;/p>
&lt;p>{&lt;/p>
&lt;p>class Program&lt;/p>
&lt;p>{&lt;/p>
&lt;p>static void Main(string[] args)&lt;/p></description></item><item><title>Using F# to Automate Reading–The Morning Brew</title><link>/?p=997/</link><pubDate>Fri, 16 Jul 2010 04:27:24 +0000</pubDate><guid>/?p=997/</guid><description>&lt;p>I guess most of the .NET Devs read &lt;a href="http://blog.cwa.me.uk/">The Morning Brew&lt;/a>, if not you should.  It is a morning newspaper for the dev, so I end up reading it first thing when I go to work. I like to  try and automate most of the stuff . So I thought why not write a script that reads the Morning Brew feed, filter the excluded content that I am not interested in and open the urls before I come in. The reason behind using F# is I don’t have to compile the code. I could use it with FSI.exe. Incase if the extraction logic changes and I don’t have to recompile , it is just fixing the script. The best part of writing in F# is I avoid all the ceremony. Here is the F# code, it is nothing fancy. And this code can easily be modified for other link collection sites.&lt;/p></description></item><item><title>Combining Stack Overflow RSS, OData and API to query</title><link>/?p=978/</link><pubDate>Wed, 14 Jul 2010 03:18:05 +0000</pubDate><guid>/?p=978/</guid><description>&lt;p>In my opinion &lt;a href="http://stackoverflow.com/">Stack Overflow&lt;/a> has a ton of knowledge to learn new tricks. And there are some really smart people in the SO community. I try and learn new things when I find time.&lt;/p>
&lt;p>I subscribe to RSS feeds for new questions on a particular topic. Example, here is one for F# from Stack Overflow &lt;a href="http://stackoverflow.com/feeds/tag/f%23">http://stackoverflow.com/feeds/tag/f%23&lt;/a>. The advantage of the RSS feed is I get to see new questions, but the drawback is I would have to navigate to the site to look for answers. AFAIK the &lt;a href="http://stacky.codeplex.com/">stacky&lt;/a> (stack overflow API) does not provide a mechanism for querying new questions based on a tag.&lt;/p></description></item><item><title>Load the same Assembly from GAC and private bin path in .NET</title><link>/?p=966/</link><pubDate>Mon, 12 Jul 2010 21:31:40 +0000</pubDate><guid>/?p=966/</guid><description>&lt;p>This post is all about exploring the CLR loader to load an assembly from GAC and from private bin path. This is not possible because, if an assembly is loaded from GAC and if the code uses Assembly.LoadFrom to load the same assembly, then the loader would return the assembly that has already been loaded from the GAC.&lt;/p>
&lt;p>Here is the ClassLibrary2 code&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>using System;&lt;/p>
&lt;p>namespace ClassLibrary2&lt;/p>
&lt;p>{&lt;/p>
&lt;p>public class Class1&lt;/p></description></item><item><title>Debugging Generic System.Nullable within Windbg</title><link>/?p=947/</link><pubDate>Thu, 08 Jul 2010 03:58:51 +0000</pubDate><guid>/?p=947/</guid><description>&lt;p>In this post I am going to unravel the mystery of debugging the Nullable&lt;!-- raw HTML omitted --> within Windbg in .NET 3.5 and also compare it with .NET 4.0. Here is the sample code and it is compiled in .NET 3.5&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>using System;&lt;/p>
&lt;p>namespace ConsoleApplication&lt;/p>
&lt;p>{&lt;/p>
&lt;p>class Program&lt;/p>
&lt;p>{&lt;/p>
&lt;p>Int32? test;&lt;/p>
&lt;p>int i = 10;&lt;/p>
&lt;p>static void Main(string[] args)&lt;/p>
&lt;p>{&lt;/p>
&lt;p>Nullable&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>Int32? i = 10;&lt;/p>
&lt;p>Object o = 10;&lt;/p></description></item><item><title>Recursive !dumpmt – Windbg</title><link>/?p=928/</link><pubDate>Tue, 06 Jul 2010 01:04:53 +0000</pubDate><guid>/?p=928/</guid><description>&lt;p>In this post I will be demonstrating how we could use CLR internal data-structures to recursively get the methodtable’s of an object and its base classes. The idea behind this is to understand the CLR data structure.&lt;/p>
&lt;p>Here is the sample code&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>using System;&lt;/p>
&lt;p>namespace ConsoleApplication&lt;/p>
&lt;p>{&lt;/p>
&lt;p>class Program : B&lt;/p>
&lt;p>{&lt;/p>
&lt;p>string test = &amp;ldquo;cw&amp;rdquo;;&lt;/p>
&lt;p>static void Main(string[] args)&lt;/p>
&lt;p>{&lt;/p>
&lt;p>var p = new Program();&lt;/p>
&lt;p>Console.Read();&lt;/p>
&lt;p>}&lt;/p>
&lt;p>}&lt;/p>
&lt;p>class B : A&lt;/p>
&lt;p>{&lt;/p>
&lt;p>public void TestB()&lt;/p></description></item><item><title>dumpstring – windbg</title><link>/?p=913/</link><pubDate>Wed, 30 Jun 2010 01:55:42 +0000</pubDate><guid>/?p=913/</guid><description>&lt;p>Viewing strings inside the debugger has never been pretty, especially if you are using sos extension.  Here is a sample !dumpobj on a string&lt;/p>
&lt;blockquote>
&lt;p>0:000&amp;gt; !do 00000000025f2280&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Name:        System.String&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>MethodTable: 000007fef6e26960&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>EEClass:     000007fef69aeec8&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Size:        32(0x20) bytes&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>String:     &lt;!-- raw HTML omitted -->Foo&lt;!-- raw HTML omitted -->&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Fields:&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>MT    Field   Offset                 Type VT     Attr            Value Name&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>000007fef6e2c848  40000ed        8         System.Int32  1 instance                3 m_stringLength&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>000007fef6e2b388  40000ee        c          System.Char  1 instance               46 m_firstChar&lt;/p></description></item><item><title>Custom DumpArray – Windbg</title><link>/?p=885/</link><pubDate>Fri, 25 Jun 2010 00:59:42 +0000</pubDate><guid>/?p=885/</guid><description>&lt;p>The &lt;a href="http://msdn.microsoft.com/en-us/library/bb190764.aspx">The&lt;/a> has !dumparray for getting contents of the array. But it cannot be used for scripting or automation. Here is an example&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>using System;&lt;/p>
&lt;p>namespace ConsoleApplication&lt;/p>
&lt;p>{&lt;/p>
&lt;p>class Program&lt;/p>
&lt;p>{&lt;/p>
&lt;p>Test[] arr = new[] { new Test() { ID = 1, Name = &amp;ldquo;Foo&amp;rdquo; }, new Test() { ID = 2, Name = &amp;ldquo;Bar&amp;rdquo; } };&lt;/p>
&lt;p>static void Main(string[] args)&lt;/p>
&lt;p>{&lt;/p>
&lt;p>var p = new Program();&lt;/p>
&lt;p>Console.WriteLine(p.arr);&lt;/p>
&lt;p>Console.Read();&lt;/p>
&lt;p>}&lt;/p>
&lt;p>}&lt;/p>
&lt;p>class Test&lt;/p>
&lt;p>{&lt;/p>
&lt;p>public int ID;&lt;/p></description></item><item><title>Do I have Managed or Native memory leak?</title><link>/?p=868/</link><pubDate>Tue, 22 Jun 2010 22:38:52 +0000</pubDate><guid>/?p=868/</guid><description>&lt;p>I noticed someone who couldn’t figure out the cause of memory leak in  managed application within the debugger. This person had basic debugging skills and was comfortable with sos.  FYI the leak wasn’t in the managed code, but in the native code. The managed code was using native code via PInvoke.&lt;/p>
&lt;p>Here is how I figured out the cause. Every time I have to debug a memory leak in managed code ,the first command I run is !vmstat. The !vmstat is available in psscor2.dll for .net 3.5 and for .net 4.0 it is available in sos. This command provides summary of VM. The output is similar to the &lt;a href="http://technet.microsoft.com/en-us/sysinternals/dd535533.aspx">VMMap&lt;/a> tool and here is the output from the command.&lt;/p></description></item><item><title>Customizing Witty Twitter Client Part 1- using C# as Compiler Service</title><link>/?p=840/</link><pubDate>Sun, 20 Jun 2010 03:28:46 +0000</pubDate><guid>/?p=840/</guid><description>&lt;p>This is going to be a multipart blog post where I am going to be demonstrating how I have customized &lt;a href="http://code.google.com/p/wittytwitter/">This is going to be a multipart blog post where I am going to be demonstrating how I have customized&lt;/a> twitter client for my need. I chose Witty because it is the only OSS .NET twitter client I know of.&lt;/p>
&lt;p>One of the reasons for customizing is primarily using C# as compiler service to extend it for my needs dynamically. For example I follow this twitter list &lt;a href="http://twitter.com/shanselman/programmers">http://twitter.com/shanselman/programmers&lt;/a> , it’s a cool list that Scott maintains, thanks to him. But there is one person in this list who keeps tweeting about weight loss, which I am least interested and I didn’t have control over it but to ignore, until now. And it is always fun to write  software for your daily needs, which for me saves time.  Thanks to Mono for C# as compiler service. FYI I have shown a simple usage of Mono Csharp compiler service in this &lt;a href="http://naveensrinivasan.com/2010/05/11/using-c-compiler-as-a-service-in-f-poshconsole-powershell/">post&lt;/a>.&lt;/p></description></item><item><title>Using Tuple as Dictionary / Map key</title><link>/?p=829/</link><pubDate>Sat, 19 Jun 2010 12:37:53 +0000</pubDate><guid>/?p=829/</guid><description>&lt;p>I  recently had to create a dictionary which needed a multipart key like &amp;lt;string,int&amp;gt; . To do this I would have to create a custom class  override equals and gethashcode. That’s when someone told I could use Tuple, but weren’t sure it was possible.  Here was the quick sample to try it in F#&lt;/p>
&lt;p>[sourcecode]&lt;/p>
&lt;p>let x = [(&amp;ldquo;naveen&amp;rdquo;,1),1;(&amp;ldquo;naveen&amp;rdquo;,1),2] |&amp;gt; Map.ofList&lt;/p>
&lt;p>[/sourcecode]&lt;/p>
&lt;p>as expected only one item in the Map&lt;/p></description></item><item><title>Using Tech-Ed OData to download videos</title><link>/?p=2071/</link><pubDate>Tue, 15 Jun 2010 12:20:32 +0000</pubDate><guid>/?p=2071/</guid><description>&lt;p>I wanted to watch the Teched 2010 videos, but the problem I had was going to the site manually to download files for offline viewing.  And I was also interested only in Dev sessions which were level 300 / 400. Thanks to OData for teched &lt;a href="http://odata.msteched.com/sessions.svc/">http://odata.msteched.com/sessions.svc/&lt;/a> ,I  could write 3 statements in linqpad and had them all downloaded using &lt;a href="http://gnuwin32.sourceforge.net/packages/wget.htm">wget&lt;/a>&lt;/p>
&lt;p>[sourcecode language=”csharp”]&lt;/p>
&lt;p>File.Delete(@&amp;ldquo;C:tempdownload.txt&amp;rdquo;);&lt;/p>
&lt;p>Sessions&lt;/p>
&lt;p>.Where (s =&amp;gt; (s.Level.StartsWith(&amp;ldquo;400&amp;rdquo;) ||  s.Level.StartsWith(&amp;ldquo;300&amp;rdquo;) ) &amp;amp;&amp;amp; s.Code.StartsWith(&amp;ldquo;DEV&amp;rdquo;))&lt;/p></description></item><item><title>Debugging base class method with conditional break point in .NET using Windbg</title><link>/?p=803/</link><pubDate>Tue, 15 Jun 2010 04:40:17 +0000</pubDate><guid>/?p=803/</guid><description>&lt;p>In this post I am going to be demonstrating how to have a conditional break-point on the base class method where it has been used by multiple derived classes. A classic example is Winform UI.&lt;/p>
&lt;p>The Control base class has got methods like set_Enabled , set_Visible which could be consumed by multiple derived controls. The goal is to debug only the control instance that we are interested in. Here is the sample code.&lt;/p></description></item><item><title>Piracy in .NET Code – Part 3 – Even when the code is obfuscated</title><link>/?p=769/</link><pubDate>Sat, 12 Jun 2010 00:37:46 +0000</pubDate><guid>/?p=769/</guid><description>&lt;p>Continuing with my &lt;a href="http://naveensrinivasan.com/category/security/">series&lt;/a> on Piracy, in this post I am going to be  exploring how someone with little advanced knowledge in CLR / Windows can bypass important function calls like  license validation.&lt;/p>
&lt;p>Most of the developers assume just because the code is obfuscated nobody can bypass the licensing logic. I am going to be demonstrating how to bypass certain function call,this is very similar to “Set Next Statement ” in VS. I am not going to be discussing on how to fix this problem.&lt;/p></description></item><item><title>Using Windows Error Reporting (WER) API in managed code to generate memory dump</title><link>/?p=750/</link><pubDate>Thu, 10 Jun 2010 03:01:09 +0000</pubDate><guid>/?p=750/</guid><description>&lt;p>The WER is a pretty cool technology from Microsoft for collecting memory dumps on process crash/ hang. This can be extended to generate on demand when the application needs to. The usual reason for getting a memory dump could be based on certain conditions, for example, the customer feels the application is slow and would want to send the information to WinQual (WER server). If the application happens to be installed on hundreds / thousands of boxes then its not going to be possible to get from individual customers, the best bet is WER. To do this here is an &lt;a href="http://msdn.microsoft.com/en-us/library/bb513635%28VS.85%29.aspx">API&lt;/a>. But this is unmanaged API and I didn’t see one for managed code. FYI this would work only on Vista + systems, it will not work on XP.&lt;/p></description></item><item><title>Identifying High CPU in GC (.NET) because of LOH – using Windbg</title><link>/?p=40/</link><pubDate>Mon, 15 Feb 2010 04:57:22 +0000</pubDate><guid>/?p=40/</guid><description>&lt;p>I am sure most of us are aware that one of the common reasons for High CPU usage .NET is because of, percentage time spent on GC is high. There are lot of write up about this. &lt;!-- raw HTML omitted -->Tess&lt;!-- raw HTML omitted --> has amazing blog post  on this specifically, which explains in detail how to identify the symptoms. But one thing that I want share was the experience I had ,where in i could identify the real call stack which was causing allocation on LOH by have a break-point on the CLR Garbage collector itself. I am going to assume that you are aware of CLR GC and LOH and basic debugging using windbg.&lt;/p></description></item><item><title>Function hit count using Pseudo-Register in Windbg</title><link>/?p=30/</link><pubDate>Sat, 13 Feb 2010 01:41:01 +0000</pubDate><guid>/?p=30/</guid><description>&lt;p>What if we want to know the number of times a function was invoked. We can have “.echo” or “.printf” on break-point of a function and count the output manually. The better way to do this is using pseudo-registers.&lt;/p>
&lt;p>In my &lt;!-- raw HTML omitted -->previous&lt;!-- raw HTML omitted --> post I had mentioned about alias inside the debugger. The debugger also provides User defined Pseudo-Registers for scripting inside the debugger. We can use them to manipulate values within our scripts. There are 20 of them from $t0,$t1.. $t19. These are pre-defined names that we cannot change.&lt;/p></description></item><item><title>Conditional Breakpoint in .NET using Windbg</title><link>/?p=26/</link><pubDate>Thu, 11 Feb 2010 03:50:00 +0000</pubDate><guid>/?p=26/</guid><description>&lt;p>With my few years of production debugging .NET code ,one thing that has really helped me a lot is Windbg. Lot us of know that using sos, sosex and Windbg we should be able to troubleshoot most of the .NET Code. But certain tips / tricks makes us productive in those crucial moments. I am assuming that you are aware of basic usage of sos and windbg.&lt;/p>
&lt;p>We know by using !bpmd command we can stick in a break-point on a method. But the issue is we would want to break in to the debugger only on a certain condition, very similar to VS.NET break-point condition.&lt;/p></description></item><item><title>Identify and Patch .NET Code using Windbg</title><link>/?p=19/</link><pubDate>Sun, 07 Feb 2010 13:30:13 +0000</pubDate><guid>/?p=19/</guid><description>&lt;p> &lt;/p>
&lt;p>The last week was really an interesting one with debugging production code. I was debugging a Winforms application which was using .NET framework 3.5 version. The real problem was with the latest release of the code, there was bug which caused certain elements on the UI not to be displayed. This is was High priority bug and very important to the business.&lt;/p>
&lt;p>The code that was causing this bug was an integer variable inside a class.&lt;/p></description></item><item><title>Home cooked web monitoring use Rx</title><link>/?p=14/</link><pubDate>Wed, 03 Feb 2010 03:07:22 +0000</pubDate><guid>/?p=14/</guid><description>&lt;p>One of the key things in software is to write succinct , declarative and asynchronous code. The answer to that is &lt;!-- raw HTML omitted -->Reactive Extensions for .NET&lt;!-- raw HTML omitted --> &lt;/p>
&lt;p>I have been digging into Rx for sometime now. Though there isn’t much of documentation I have been kind of successful in getting certain things done with it.&lt;/p>
&lt;p>One of requirement that came up from our Operations was to monitor some websites and notify someone if the site was not accessible. But the added constraints to this were check for the site status only at a certain interval and report failure only if it was more than certain percentage within a certain duration.&lt;/p></description></item><item><title>Resharper Template for F#</title><link>/?p=6/</link><pubDate>Mon, 01 Feb 2010 19:06:03 +0000</pubDate><guid>/?p=6/</guid><description>&lt;p>I have been hacking F# lately and I am big fan of ReSharper. So why not create a few Live Templates for the things i do daily in F#.&lt;/p>
&lt;p>&lt;a href="http://bit.ly/dvXmEH">Download&lt;/a> R# live template for F#. I am sure there are few more things that can be part of this template. I have posted the code in MSDN Code gallery so that others can find and contribute.&lt;/p></description></item></channel></rss>