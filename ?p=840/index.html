<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="ie=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=author content="admin">
<meta name=description content="This is going to be a multipart blog post where I am going to be demonstrating how I have customized This is going to be a multipart blog post where I am going to be demonstrating how I have customized twitter client for my need. I chose Witty because it is the only OSS .NET twitter client I know of.
One of the reasons for customizing is primarily using C# as compiler service to extend it for my needs dynamically.">
<meta name=keywords content>
<meta name=robots content="noodp">
<meta name=theme-color content>
<link rel=canonical href="/?p=840/">
<title>
Customizing Witty Twitter Client Part 1- using C# as Compiler Service :: naveen srinivasan — Write code.Loves to read
</title>
<link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css>
<link rel=stylesheet href=/main.29c2c8c3fc9cf748254138351f142ac2833b208a68e83aec126edc98b59efef2.css>
<meta itemprop=name content="Customizing Witty Twitter Client Part 1- using C# as Compiler Service">
<meta itemprop=description content="This is going to be a multipart blog post where I am going to be demonstrating how I have customized This is going to be a multipart blog post where I am going to be demonstrating how I have customized twitter client for my need. I chose Witty because it is the only OSS .NET twitter client I know of.
One of the reasons for customizing is primarily using C# as compiler service to extend it for my needs dynamically."><meta itemprop=datePublished content="2010-06-20T03:28:46+00:00">
<meta itemprop=dateModified content="2010-06-20T03:28:46+00:00">
<meta itemprop=wordCount content="622"><meta itemprop=image content="/">
<meta itemprop=keywords content>
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="/">
<meta name=twitter:title content="Customizing Witty Twitter Client Part 1- using C# as Compiler Service">
<meta name=twitter:description content="This is going to be a multipart blog post where I am going to be demonstrating how I have customized This is going to be a multipart blog post where I am going to be demonstrating how I have customized twitter client for my need. I chose Witty because it is the only OSS .NET twitter client I know of.
One of the reasons for customizing is primarily using C# as compiler service to extend it for my needs dynamically.">
<meta property="article:section" content=".NET">
<meta property="article:section" content="C#">
<meta property="article:section" content="Mono">
<meta property="article:published_time" content="2010-06-20 03:28:46 +0000 UTC">
</head>
<body>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ style=text-decoration:none>
<div class=logo>
<span class=logo__mark>></span>
<span class=logo__text>cd /home</span>
<span class=logo__cursor>
</span>
</div>
</a>
<span class=header__right>
<nav class=menu>
<ul class=menu__inner><li><a href=/posts>posts</a></li><li><a href=/posts>posts</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<main class=post>
<div class=post-info>
</p>
</div>
<article>
<h2 class=post-title><a href="/?p=840/">Customizing Witty Twitter Client Part 1- using C# as Compiler Service</a></h2>
<div class=post-content>
<p>This is going to be a multipart blog post where I am going to be demonstrating how I have customized <a href=http://code.google.com/p/wittytwitter/>This is going to be a multipart blog post where I am going to be demonstrating how I have customized</a> twitter client for my need. I chose Witty because it is the only OSS .NET twitter client I know of.</p>
<p>One of the reasons for customizing is primarily using C# as compiler service to extend it for my needs dynamically. For example I follow this twitter list <a href=http://twitter.com/shanselman/programmers>http://twitter.com/shanselman/programmers</a> , it’s a cool list that Scott maintains, thanks to him. But there is one person in this list who keeps tweeting about weight loss, which I am least interested and I didn’t have control over it but to ignore, until now. And it is always fun to write  software for your daily needs, which for me saves time.  Thanks to Mono for C# as compiler service. FYI I have shown a simple usage of Mono Csharp compiler service in this <a href=http://naveensrinivasan.com/2010/05/11/using-c-compiler-as-a-service-in-f-poshconsole-powershell/>post</a>.</p>
<p>Here are things that I could get done by just spending few hours of my weekend time</p>
<p>Here is my the default witty</p>
<p><a href=http://104.197.135.42/wp-content/uploads/2010/06/initialwitty2.jpg></a></p>
<p>Filter the list by user name  which I am not interested in</p>
<p>[sourcecode language=”csharp”]</p>
<p>new Func&lt;Tweet, bool>(t => !t.User.Name.Contains(&ldquo;CNN&rdquo;));</p>
<p>[/sourcecode]</p>
<p>Here is the same without CNN</p>
<p><a href=http://104.197.135.42/wp-content/uploads/2010/06/witty-filteredbyname2.jpg></a></p>
<p>FYI the filter C# code is in the Filter Text box</p>
<p>The next filter criteria is to look for tweets that have hashtag as fsharp and also at least have one link</p>
<p>[sourcecode language=”csharp”]</p>
<p>new Func&lt;Tweet, bool>(t => t.HashTags.DefaultIfEmpty().Contains("#fsharp") && t.Urls.DefaultIfEmpty().Count() > 0);</p>
<p>[/sourcecode]</p>
<p>And here is the filtered list</p>
<p><a href=http://104.197.135.42/wp-content/uploads/2010/06/witty-filteredbyfsharp2.png></a></p>
<p>Be even crazier look for tweets that have hashtag as fsharp and at least one link and then open the link automatically</p>
<p>[sourcecode language=”csharp”]</p>
<p>new Func&lt;Tweet, bool>(t => {</p>
<p>if (t.HashTags.DefaultIfEmpty().Contains("#fsharp") && t.Urls.DefaultIfEmpty().Count() > 0)</p>
<p>System.Diagnostics.Process.Start(t.Urls.First().ToString());</p>
<p>return t.HashTags.DefaultIfEmpty().Contains("#fsharp") && t.Urls.DefaultIfEmpty().Count() > 0; });</p>
<p>[/sourcecode]</p>
<p><a href=http://104.197.135.42/wp-content/uploads/2010/06/witty-browseropenlink2.png></a></p>
<p>The browser with the link opened automatically.</p>
<p>It’s a hack and I shouldn’t be doing the above, but it does the job.</p>
<p>There is so much more possibilities. I could easily provide a save feature for these search scripts and reuse the same.  At the end of the series I will post the entire code in GitHub. But if you want to try it before that here are the simple changes I started doing to the code.</p>
<p>Extension Method for Compilation</p>
<p>[sourcecode language=”csharp”]</p>
<p>static class Extensions</p>
<p>{</p>
<p>public static object Compile(this string code)</p>
<p>{</p>
<p>return Mono.CSharp.Evaluator.Evaluate(code);</p>
<p>}</p>
<p>public static void Run(this string code)</p>
<p>{</p>
<p>Mono.CSharp.Evaluator.Run(code);</p>
<p>}</p>
<p>}</p>
<p>[/sourcecode]</p>
<p>The filter code</p>
<p>[sourcecode language=”csharp”]</p>
<p>public bool TweetFilter(object item)</p>
<p>{</p>
<p>Tweet tweet = item as Tweet;</p>
<p>// this will prevent the fade animation from starting when the tweet is filtered</p>
<p>tweet.IsNew = false;</p>
<p>try</p>
<p>{</p>
<p>Func&lt;Tweet, bool> compare = (Func&lt;Tweet, bool>)FilterTextBox.Text.Compile();</p>
<p>return compare.Invoke(tweet);</p>
<p>}</p>
<p>catch(Exception ex)</p>
<p>{</p>
<p>Console.WriteLine(ex);</p>
<p>}</p>
<p>return true;</p>
<p>}</p>
<p>[/sourcecode]</p>
<p>The hashtags and Links weren’t part of the tweet class , but they were part of the UI class. So I had to bring them to the tweet class and populate them.</p>
<p>[sourcecode language=”csharp”]</p>
<p>public IEnumerable Urls</p>
<p>{</p>
<p>get</p>
<p>{</p>
<p>return links;</p>
<p>}</p>
<p>set</p>
<p>{</p>
<p>links.Clear();</p>
<p>links.AddRange(value);</p>
<p>}</p>
<p>}</p>
<p>public IEnumerable HashTags</p>
<p>{</p>
<p>get</p>
<p>{</p>
<p>return hashTags;</p>
<p>}</p>
<p>set</p>
<p>{</p>
<p>hashTags.Clear();</p>
<p>hashTags.AddRange(value);</p>
<p>}</p>
<p>}</p>
<p>[/sourcecode]</p>
<p>And here is the code to populate the above properties</p>
<p>[sourcecode language=”csharp”]</p>
<p>private IEnumerable GetLinks(string text)</p>
<p>{</p>
<p>string[] words = Regex.Split(text, @"([ (){}[]])");</p>
<p>return (from word in words</p>
<p>let isUrl = new Func&lt;string, bool>(s => UrlShorteningService.IsUrl(s))</p>
<p>where isUrl(word)</p>
<p>select new Uri(word) ).ToList();</p>
<p>}</p>
<p>private IEnumerable GetHashTags(string text)</p>
<p>{</p>
<p>string[] words = Regex.Split(text, @"([ (){}[]])");</p>
<p>return (from word in words</p>
<p>let ishash = new Func&lt;string, bool>(s => s.StartsWith("#"))</p>
<p>where ishash(word)</p>
<p>select word).ToList();</p>
<p>}</p>
<p>[/sourcecode]</p>
<p>I know for the above 2 functions I could have written a High-Order Function</p>
</div>
</article>
<hr>
<div class=post-info>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=tag><a href=/categories/.net/>.NET</a></span>
<span class=tag><a href=/categories/c/>C#</a></span>
<span class=tag><a href=/categories/mono/>Mono</a></span>
</p>
</div>
</main>
</div>
<footer class=footer>
</footer>
</div>
<script type=text/javascript src=/bundle.min.599099f1f14b78b657d524b28e10e0c5098e7cd46e9c7aed73d577068a276c3ff1bb234cbf29cb313333e83cf411727b43157c91ce5b809e2ffc81664614608e.js integrity="sha512-WZCZ8fFLeLZX1SSyjhDgxQmOfNRunHrtc9V3BoonbD/xuyNMvynLMTMz6Dz0EXJ7QxV8kc5bgJ4v/IFmRhRgjg=="></script>
</body>
</html>